<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="25">
<Class name="TWReader.Requests.APIMethodsCaller">
<Super>%RegisteredObject</Super>
<TimeCreated>63619,75001.090612</TimeCreated>

<Parameter name="BaseSSLURL">
<Default>https://api.twitter.com</Default>
</Parameter>

<Parameter name="SslTlsConfig">
<Default>Twitter</Default>
</Parameter>

<Parameter name="ApiServer">
<Default>api.twitter.com</Default>
</Parameter>

<Parameter name="ApiUserTimelineUrl">
<Default>1.1/statuses/user_timeline.json</Default>
</Parameter>

<Parameter name="ApiSearchUrl">
<Default>1.1/search/tweets.json</Default>
</Parameter>

<Method name="TweetsSearch">
<ClassMethod>1</ClassMethod>
<FormalSpec><![CDATA[&responseData:%String,listparams:%List]]></FormalSpec>
<ReturnType>%Status</ReturnType>
<Implementation><![CDATA[
	#dim a as %ArrayOfDataTypes = ##class(%ArrayOfDataTypes).%New()
	do a.SetAt($li(listparams, 1), "q")
	do a.SetAt("recent", "result_type")
	do a.SetAt($li(listparams, 2), "count")
	do:($li(listparams, 2)="") a.SetAt(15, "count")
	//do ..AddParameter(a, "since_id", sinceId)
	//do ..AddParameter(a, "until", ..DateToString(until))
	
	#dim url = "https://" _ ..#ApiServer _ "/" _ ..#ApiSearchUrl
	#dim authHeader as %String = ##class(Util.Requests.Authorizer).%New().GetAuthHeader("get", url, a)
	
	#dim status as %Status = ##class(Util.Requests.RequestSender).SendHttpRequest(..#ApiServer, ..#ApiSearchUrl, a, .responseData, , authHeader)
	
	quit status
]]></Implementation>
</Method>
</Class>
</Export>
